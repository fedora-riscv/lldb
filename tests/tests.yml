- hosts: localhost
  pre_tasks:
  # We want to be able to check that the sub-package dependencies are correct.
  # The CI system installs all sub-packages, so we remove them so we can
  # test them individually.
  - name: Remove RPMS installed by CI
    package:
      name:
        - python2-lldb
        - lldb
        - lldb-devel
      state: absent
    tags: classic
  roles:
  - role: standard-test-basic
    tags:
      - classic
    required_packages:
      - gcc-c++
      - lldb
      # the requirements below are for the integration suite
      - cmake
      - llvm-devel
      - clang
      - clang-analyzer
      - clang-tools-extra
      - compiler-rt
      - ninja-build
      - libcxx-devel
      - libomp-devel
      - python-lit
      - lld
      - lldb
      - git
      - make
      - libstdc++-static
      - clang-devel
    tests:
      # rhbz#1567262
      - python-embedded-interpreter:
          dir: python-embedded-interpreter
          run: ./runtest.sh
      - integration-test-suite
